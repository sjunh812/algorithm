# 최종 순위
### 작년 순위와 상대적인 순위가 바뀐 모든 팀의 목록이 주어졌을 때, 올해 순위를 만드는 프로그램을 작성하기
#### 조건
- 작년에 비해서 상대적인 순위가 바뀐 팀의 목록을 발표함.(작년 순위는 입력으로 주어짐.) 예를 들어, 작년에 ```팀 13```이 ```팀 6``` 보다 순위가 높았는데, 올해 ```팀 6```이 ```팀 13```보다 순위가 높다면, ```(6, 13)```을 발표함.
- 출력하는 숫자는 올해 순위이며, 1등팀부터 순서대로 출력함. 만약, 확실한 순위를 찾을 수 없다면 ```"?"```를 출력하고, 데이터에 일관성이 없어서 순위를 정할 수 없는 경우에는 ```"IMPOSSIBLE"```을 출력함.
### 풀이
문제에서는 작년 순위와 상대적으로 순위가 바뀐 팀들의 목록이 주어졌을 때, '올해 순위'를 만들 것을 요구하고 있다. 즉, **'정해진 우선순위에 맞게 전체 팀들의 순서를 나열해야 한다'** 는 점에서 ```위상 정렬``` 알고리즘을 떠올릴 수 있어야 한다.  
다시 말해 이 문제는 팀 간의 순위 정보를 그래프 정보로 표현한 뒤에, ```위상 정렬``` 알고리즘을 이용해 해결할 수 있다.  

문제에 제시된 예시 중 하나를 가지고 생각해보자.
```
# 작년 순위 정보
1등 : 팀 5
2등 : 팀 4
3등 : 팀 3
4등 : 팀 2
5등 : 팀 1
```
위와 같은 작년의 순위 정보가 주어지면, '자기보다 낮은 등수를 가진 팀을 가리키도록' 방향 그래프를 만들 수 있다. 만약에 이대로 ```위상 정렬```을 수행하게 되면, 수행 결과는 ```5-4-3-2-1```이 된다.  
즉, 문제에서 제시한 순위 정보와 동일하게 나오며, 다른 경우는 존재하지 않는다.  

이제 상대적인 순위가 바뀌게 되는 경우에는, 해당 **간선의 방향을 반대로 변경**하면 된다. 예를 들어 ```팀 2```와 ```팀 4```가 순위가 바귀고, ```팀 3```과 ```팀 4```가 서로 순위가 바뀌면 처음 만든 방향 그래프에서 주어진 경우의 간선만 반대로 변경해주면 된다.  

이후에 이 상태에서 ```위상 정렬```을 다시 수행하면 된다.  
```위상 정렬```은 2가지 특이 케이스가 존재한다.  
```
1) 사이클이 발생하는 경우
2) 위상 정렬의 결과가 1개가 아닌 여러 가지인 경우
```
이 2가지 경우에 해당하지 않는다면 ```위상 정렬```을 수행한 결과가 '오직 하나의 경우'만 존재하게 된다. 즉, 가능한 순위가 하나라는 의미가 된다.  

따라서, 변경된 상대적인 순위를 적용한 이후에, ```위상 정렬``` 알고리즘을 실행하면서 사이클이 발생하는지, 혹은 결과가 여러 가지인지 확인하면 된다.  
일반적인 ```위상 정렬```의 경우, 정확히 ```N```개의 노드가 큐에서 출력이 된다.  
만약에 **노드가 ```N```번 나오기 전에 큐가 비게 된다면, 사이클이 발생한 것**으로 이해할 수 있다.  
또한 **특정 시점에 2개 이상의 노드가 큐에 한꺼번에 들어갈 때는, 가능한 정렬 결과가 여러 가지**라는 의미가 된다.  
그러므로 ```위상 정렬``` 수행 과정에서 큐에서 노드를 뽑을 때 큐의 원소가 항상 1개로 유지되는 경우에만 고유한 순위가 존재하는 것으로 이해할 수 있다.  

즉, ```위상 정렬``` 소스코드에서 매 시점마다 큐의 원소가 ```0개```이거나, ```2개``` 이상 인지를 체크하는 부분을 넣어주어 정답 소스코드를 작성할 수 있다.