# 5719번 : 거의 최단 경로
### 거의 최단 경로란 최단 경로에 포함되지 않는 도로로만 이루어진 경로 중 가장 짧은 것을 말할 때, 각 테스트 케이스에 대해서, 거의 최단 경로의 길이를 출력하는 프로그램 작성하기
#### 조건
- 장소의 수 ```N```(2 ≤ N ≤ 500)과 도로의 수 ```M```(1 ≤ M ≤ 10^4)가 주어짐.
- 시작점 ```S```와 도착점 ```D```가 주어짐.(S ≠ D; 0 ≤ S, D < N)
- 도로의 정보 ```U```, ```V```, ```P```가 주어지며, (U ≠ V ; 0 ≤ U, V < N; 1 ≤ P ≤ 103) 이 뜻은 ```U```에서 ```V```로 가는 도로의 길이가 ```P```라는 뜻임.(```U```에서 ```V```로 가는 도로는 최대 한 개이며, ```U```에서 ```V```로 가는 도로와 ```V```에서 ```U```로 가는 도로는 다른 도로)
- 거의 최단 경로가 없는 경우에는 ```-1```을 출력
### 풀이
문제의 제목만 보면 알 수 있듯이 **최단 경로** 알고리즘을 이용해서 푸는 문제이다.  
장소의 수 ```N```의 범위와 각 도로별로 길이(비용)이 다르게 주어진 것으로 보아, ```다익스트라``` 알고리즘을 이용해 풀어야 한다는 사실을 눈치챌 수 있다.  

거의 최단 경로의 정의를 다시 한번 살펴보자.  
거의 최단 경로란, **최단 경로에 포함되지 않는 도로**로만 이루어진 경로 중 가장 짧은 것을 말한다. 이는 곧 최단 경로에 포함되는 도로(간선)을 제거한 뒤에 최단 경로를 구해주면 된다는 의미와 같다!  
즉, 두 번의 ```다익스트라``` 알고리즘을 수행하면 문제를 해결할 수 있음을 알 수 있다.  

그렇다면 거의 최단 경로를 구하기 위해 **최단 경로의 도로(간선)를 제거**하는 로직은 어떻게 구현해야 할까?  
그래프를 역방향으로 탐색하면서 앞서 진행한 ```다익스트라``` 알고리즘의 최단 경로 테이블을 이용하면 최단 경로의 도로(간선)를 구할 수 있다.  
그래프를 역방향으로 탐색할 때에는 입력으로 받은 간선을 반대방향으로 끝점을 시작점으로 하여 탐색을 진행하면 된다.  
이때 탐색에는 ```BFS(너비 우선 탐색)```를 이용했는데, 기존 ```BFS```에서는 **방문 처리 테이블**을 이용해 탐색 했다면, 이번 경우에는 현재 탐색중인 지점까지의 거리(시작점부터)와 현재 지점까지의 최단 경로의 합을 더해 앞서 ```다익스트라``` 알고리즘을 통해 구한 최단 경로인 경우에만 **큐 삽입**을 진행한다.  
이때 놓치지 말고 유의해야 하는 점으로 중복되는 간선이 풀필요하게 큐에 삽입될 수가 있어 ```메모리 초과```가 발생할 수 있다. 따라서 큐 삽입 조건에 이미 큐에 삽입되지 않은 도로라는 조건을 추가해주면 된다.  

이렇게 최단 경로의 도로를 구해 제거했다면, 다시 한번 ```다익스트라``` 알고리즘을 수행해 최단 경로 테이블을 구해서 거의 최단 경로를 구할 수 있다!
